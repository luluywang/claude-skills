Where Î’  ï¿½ is the vector of mean consumer preferences and Î  maps demeaned consumer demographic
                                                            ï¿½ ) to individual consumer preferences. For
characteristics such as income and house prices (ğ·ğ·ğ‘–ğ‘–ğ‘–ğ‘–ğ‘–ğ‘– âˆ’ ğ·ğ·
example, higher-income borrowers can have different price sensitivities than lower-income
borrowers, and their preferences over mortgage size can differ. Î£ scales normal i.i.d. shocks
ğœˆğœˆğ‘–ğ‘– ~ğ‘ğ‘(0, ğ¼ğ¼). Thus, even borrowers with the same observable characteristics, such as income, can differ
in their price elasticity or ideal mortgage size. The demand parameters to be estimated are then ğœƒğœƒğ‘‘ğ‘‘ =
(Î’ï¿½, Î , Î£). 12

Consumers choose the mortgage that maximizes their utility by choosing between offered mortgages,
subject to an LTV constraint. If they do not choose a mortgage, they choose an outside good with a
fixed utility, ğ‘¢ğ‘¢ğ‘–ğ‘–0 . In other words, given product characteristics for each mortgage offered in the market
ğ‘—ğ‘—ğ‘—ğ‘—ğ‘—ğ‘—ğ‘”ğ‘” (including interest rate, mortgage type, lender type, statutory size limits, and service quality),
and demand parameters ğœƒğœƒğ‘‘ğ‘‘ , the set of borrower characteristics (including product-borrower match
utilities ğœ–ğœ–ğ‘–ğ‘–ğ‘–ğ‘–ğ‘–ğ‘– ..), such that borrowers with these characteristics in market ğ‘ğ‘ğ‘ğ‘ choose a mortgage of type
g from lender ğ‘—ğ‘— is:
                      ğ´ğ´ğ‘—ğ‘—ğ‘—ğ‘—ğ‘—ğ‘—ğ‘—ğ‘— (ğ‘Ÿğ‘Ÿâ‹…ğ‘ğ‘ğ‘ğ‘. , ğ‘”ğ‘”â‹…ğ‘ğ‘ğ‘ğ‘. , ğ¹ğ¹ï¿½ğ‘ğ‘ğ‘ğ‘ , ğ‘ğ‘â‹…ğ‘¡ğ‘¡ , ğœ‰ğœ‰â‹…ğ‘ğ‘ğ‘ğ‘ ; ğœƒğœƒğ‘‘ğ‘‘ )                                                              (D.4)
                                                      = ï¿½ï¿½ğ·ğ·ğ‘–ğ‘– , ğœ–ğœ–ğ‘–ğ‘–0ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ , â€¦ , ğœ–ğœ–ğ‘–ğ‘–ğ‘–ğ‘–ğ‘–ğ‘–ğ‘–ğ‘–ğ‘–ğ‘– ï¿½ | ğ‘¢ğ‘¢ğ‘–ğ‘–ğ‘–ğ‘–ğ‘–ğ‘–ğ‘–ğ‘–ğ‘–ğ‘– â‰¥ ğ‘¢ğ‘¢ğ‘–ğ‘–ğ‘–ğ‘–ğ‘–ğ‘–ğ‘–ğ‘–ğ‘–ğ‘– , âˆ€ğ‘˜ğ‘˜, ğ‘™ğ‘™ï¿½
ğ´ğ´ğ‘—ğ‘—ğ‘—ğ‘—ğ‘—ğ‘—ğ‘—ğ‘— (â‹…) denotes the set of demographic characteristics ğ·ğ·ğ‘–ğ‘– and idiosyncratic shocks ğœ–ğœ–ğ‘–ğ‘–â‹…ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ such that
given loan characteristics (ğ‘Ÿğ‘Ÿâ‹…ğ‘ğ‘ğ‘ğ‘. , ğ‘”ğ‘”â‹…ğ‘ğ‘ğ‘ğ‘. , ğ¹ğ¹ï¿½ğ‘ğ‘ğ‘ğ‘ , ğ‘ğ‘â‹…ğ‘¡ğ‘¡ , ğœ‰ğœ‰â‹…ğ‘ğ‘ğ‘¡ğ‘¡ ) and parameters ğœƒğœƒğ‘‘ğ‘‘ , consumers with those
demographics and preference shocks obtain more utility from choosing the loan from lender ğ‘—ğ‘— of type
ğ‘”ğ‘”, ğ‘¢ğ‘¢ğ‘–ğ‘–ğ‘–ğ‘–ğ‘–ğ‘–ğ‘–ğ‘–ğ‘–ğ‘– , than from all other lenders and loan types, ğ‘¢ğ‘¢ğ‘–ğ‘–ğ‘–ğ‘–ğ‘–ğ‘–ğ‘–ğ‘–ğ‘–ğ‘– among loans satisfying the borrower-
specific LTV constraint. Integrating over demographics and shocks yields the market share of
mortgage lender ğ‘—ğ‘— offering product ğ‘”ğ‘” in market ğ‘ğ‘ğ‘ğ‘:

                                                                                                       exp ï¿½ğ‘¢ğ‘¢ğ‘–ğ‘–ğ‘–ğ‘–ğ‘–ğ‘–ğ‘–ğ‘–ğ‘–ğ‘– (Î’ğ‘–ğ‘– )ï¿½
                 ğ‘ ğ‘ ğ‘—ğ‘—ğ‘—ğ‘—ğ‘—ğ‘—ğ‘—ğ‘— (ğ‘Ÿğ‘Ÿâ‹…ğ‘ğ‘ğ‘ğ‘. , ğ‘”ğ‘”â‹…ğ‘ğ‘ğ‘ğ‘. , ğ¹ğ¹ï¿½ğ‘ğ‘ğ‘ğ‘ , ğ‘ğ‘â‹…ğ‘¡ğ‘¡ , ğœ‰ğœ‰â‹…ğ‘ğ‘ğ‘ğ‘ ; ğœƒğœƒğ‘‘ğ‘‘ ) = ï¿½                                                 ğ‘‘ğ‘‘ğ‘‘ğ‘‘(ğµğµğ‘–ğ‘– )   (D.5)
                                                                                             ğ´ğ´ğ‘—ğ‘—ğ‘—ğ‘—ğ‘—ğ‘—ğ‘—ğ‘— âˆ‘ğ‘˜ğ‘˜,ğ‘™ğ‘™ expï¿½ğ‘¢ğ‘¢ğ‘–ğ‘–ğ‘–ğ‘–ğ‘–ğ‘–ğ‘–ğ‘–ğ‘–ğ‘– (Î’ğ‘–ğ‘– )ï¿½

Note that the size of mortgages a consumer chooses is implicitly captured in expression D.4. If a
consumer prefers a jumbo-sized mortgage and chooses a jumbo mortgage, she does so at the ideal
size or at the LTV constraint. If instead this consumer chooses a conforming mortgage, she will
choose the largest conforming mortgage possible subject to the LTV constraint, which implies
bunching at the conforming loan limit.

IV.B Mortgage Supply
There are ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ banks, ğ‘ğ‘ğ‘›ğ‘›ğ‘›ğ‘›ğ‘›ğ‘› non-fintech shadow banks, and ğ‘ğ‘ğ‘“ğ‘“ğ‘“ğ‘“ğ‘“ğ‘“ fintech shadow banks in market ct.
Lenders choose simultaneously which mortgages to originate across all markets and how to finance
them. A lender j who originates ğ‘šğ‘šğ‘—ğ‘—ğ‘—ğ‘—ğ‘—ğ‘—ğ‘—ğ‘— dollars of mortgage type g in market ct has to decide how many


12
  We directly draw log ğ¹ğ¹ğ‘–ğ‘– , log house prices and log income from normal distributions. In consequence, the distribution
of log ğ¹ğ¹ğ‘–ğ‘– is normal, so ğ¹ğ¹ğ‘–ğ‘– is lognormal.

                                                                                             17
