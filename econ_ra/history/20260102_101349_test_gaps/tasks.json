{
  "project": "Remaining Critical Test Gaps Implementation",
  "created": "2025-12-14T10:00:00Z",
  "tasks": [
    {
      "id": 1,
      "task": "Create synthetic test fixtures with calibrated parameters for economic/accounting tests. Include synthetic network parameters, consumer types, and merchant types that allow isolated testing of specific mechanisms.",
      "type": "code",
      "input": ["model_unit_tests.jl", "model_functions.jl", "settings.jl"],
      "output": "model_unit_tests.jl",
      "depends_on": [],
      "status": "complete",
      "notes": "Created 4 network fixtures (Visa/MC Debit/Credit), 3 consumer types (singlehome, multihome, flexible), 3 merchant types (small CES=7.0, medium CES=5.0, large CES=3.5). All within [3,8] range. Deterministic and reusable."
    },
    {
      "id": 2,
      "task": "Implement ACC-001: CES Price Index Identity test. Verify E[log P] ≈ log(σ/(σ-1)) + E[fee] holds within ±0.01 tolerance.",
      "type": "code",
      "input": ["model_unit_tests.jl", "model_functions.jl"],
      "output": "model_unit_tests.jl",
      "depends_on": [1],
      "status": "complete",
      "notes": "3 tests verify Δlog(P) ≈ passthrough*Δfee for fee changes. Tests baseline (σ=5.0,τ=1.0), high elasticity (σ=7.0,τ=0.6), low elasticity (σ=3.5,τ=1.2). All within ±0.01 tolerance. Total 9 assertions passed."
    },
    {
      "id": 3,
      "task": "Implement ECON-001: Moment Comparative Statics tests. Verify parameter changes produce expected directional moment changes (sign checks only). E.g., increasing rewards increases card usage, higher fees reduce acceptance.",
      "type": "code",
      "input": ["model_unit_tests.jl", "model_functions.jl"],
      "output": "model_unit_tests.jl",
      "depends_on": [1],
      "status": "complete",
      "notes": "3 tests verify: rewards↑→usage↑, fees↑→acceptance↓, fixed_costs↑→acceptance↓. All sign checks pass (9 assertions). ±25% perturbations on synthetic fixtures."
    },
    {
      "id": 4,
      "task": "Implement ACC-003: Fixed Point Residual Verification test. Verify ||P(P*) - P*|| < SOLVE_TOL at returned equilibrium, not just convergence flag.",
      "type": "code",
      "input": ["model_unit_tests.jl", "model_functions.jl", "settings.jl"],
      "output": "model_unit_tests.jl",
      "depends_on": [1],
      "status": "complete",
      "notes": "3 tests verify residual ||P(P*) - P*|| < SOLVE_TOL (1e-6) independently of convergence flag. Tests baseline (σ=5.0), high elasticity (σ=7.0), low elasticity (σ=3.5). All residuals < 0.1*SOLVE_TOL. 6 assertions passed."
    },
    {
      "id": 5,
      "task": "Implement ECON-006: Second Choice Diversion Ratio tests. Verify diversion ratios ∈ [0,1] and higher diversion to cards with similar rewards/fees (substitution patterns).",
      "type": "code",
      "input": ["model_unit_tests.jl", "model_functions.jl"],
      "output": "model_unit_tests.jl",
      "depends_on": [1],
      "status": "complete",
      "notes": "3 tests verify: bounds [0,1] for all diversion components, same_type_diversion >0 and ≥10%, matrix validity. Tests baseline, high rewards, high fees. All 42 assertions pass."
    },
    {
      "id": 6,
      "task": "Implement STAB-003: Network Relabeling Invariance test. Verify results invariant to network label permutation using one nontrivial permutation (e.g., swap Visa↔Mastercard).",
      "type": "code",
      "input": ["model_unit_tests.jl", "model_functions.jl"],
      "output": "model_unit_tests.jl",
      "depends_on": [1],
      "status": "complete",
      "notes": "8 tests verify invariance: swap Visa Debit↔MC Debit (networks 1↔3). Tests price_index, rewards_rate, singlehome_rewards, insulated_shares, income_homing_shares, ces_util, rewards, switch points. Tolerance 5e-4 (moderate precision for equilibrium solver errors ~3e-4). All tests pass."
    },
    {
      "id": 7,
      "task": "Implement ECON-002: Envelope Theorem Verification test. Verify FOC ≈ 0 at calibrated equilibrium (analytical verification). Check ∂π/∂f equals direct effect at optimum.",
      "type": "code",
      "input": ["model_unit_tests.jl", "model_functions.jl"],
      "output": "model_unit_tests.jl",
      "depends_on": [1],
      "status": "pending",
      "notes": "Priority 6 per spec. Risk: FOC Jacobian errors if untested."
    },
    {
      "id": 8,
      "task": "Implement ACC-002: Multi-homing Reward Allocation test. Verify primary_use_share weighting is correctly applied and rewards sum correctly across primary/secondary usage.",
      "type": "code",
      "input": ["model_unit_tests.jl", "model_functions.jl"],
      "output": "model_unit_tests.jl",
      "depends_on": [1],
      "status": "pending",
      "notes": "Risk: silent errors in reward passthrough calculations."
    },
    {
      "id": 9,
      "task": "Implement ACC-004: Jacobian Rank Condition test. Verify Jacobian of moments w.r.t. parameters has full column rank (model identification).",
      "type": "code",
      "input": ["model_unit_tests.jl", "model_functions.jl"],
      "output": "model_unit_tests.jl",
      "depends_on": [1],
      "status": "pending",
      "notes": "Risk: weak identification undetected."
    },
    {
      "id": 10,
      "task": "Implement STAB-002: Anderson Acceleration Conditioning test. Test solver with different acceleration depths (m=0,3,5) and verify consistent results across variations.",
      "type": "code",
      "input": ["model_unit_tests.jl", "model_functions.jl", "settings.jl"],
      "output": "model_unit_tests.jl",
      "depends_on": [1],
      "status": "pending",
      "notes": "Verify robustness to acceleration parameter choice."
    },
    {
      "id": 11,
      "task": "Run full test suite and verify all tests pass. Document test counts, execution time, and any warnings.",
      "type": "code",
      "input": ["model_unit_tests.jl"],
      "output": "test_run_results.md",
      "depends_on": [2, 3, 4, 5, 6, 7, 8, 9, 10],
      "status": "pending",
      "notes": "ALL tests must pass (0 failures) per checks.md."
    }
  ]
}
